app-id: app.bluebubbles.BlueBubbles
runtime: org.gnome.Platform
runtime-version: '42'
sdk: org.gnome.Sdk
command: bluebubbles
separate-locales: false
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --device=dri
  - --socket=pulseaudio
  - --own-name=app.bluebubbles.BlueBubbles
  - --system-talk-name=org.freedesktop.DBus
  - --system-talk-name=org.freedesktop.DBus.*
  - --system-talk-name=org.freedesktop.NetworkManager
  - --system-talk-name=org.freedesktop.NetworkManager.Connection.Active
  - --system-talk-name=org.freedesktop.FileManager1
  - --share=network
  - --filesystem=xdg-data
  - --filesystem=xdg-download
modules:
  - name: bluebubbles
    buildsystem: simple
    build-commands:
      - 'mkdir -p bluebubbles'
      - 'tar -xf bluebubbles-linux-portable.tar.gz -C bluebubbles'
      - 'cp -r bluebubbles /app/'
      - 'chmod +x /app/bluebubbles/bluebubbles'
      - 'mkdir -p /app/bin'
      - 'ln -s /app/bluebubbles/bluebubbles /app/bin/bluebubbles'
      - 'mkdir -p /app/lib'
      - 'mv libvlc.so.5/lib64/* /app/lib/'
      - 'mv libappindicator3.so.1/lib64/* /app/lib/'
      - 'mv libindicator3.so.7/lib64/* /app/lib/'
      - 'mv libdbusmenu-glib.so.4/lib64/* /app/lib/'
      - 'mv libvlccore.so.9/lib64/* /app/lib/'
      - 'mv libdbusmenu-gtk3.so.4/lib64/* /app/lib/'
      - 'mv libidn.so.11/lib64/* /app/lib/'
      - 'mv libobjectbox.so/libobjectbox.so /app/lib/'
      - 'cp zenity/bin/zenity /app/bin/'
      - 'mkdir -p /app/share/metainfo'
      - 'cp -r app.bluebubbles.BlueBubbles.metainfo.xml /app/share/metainfo/'
      - 'mkdir -p /app/share/icons/hicolor/64x64/apps'
      - 'cp -r 64x64.png /app/share/icons/hicolor/64x64/apps/app.bluebubbles.BlueBubbles.png'
      - 'mkdir -p /app/share/icons/hicolor/128x128/apps'
      - 'cp -r 128x128.png /app/share/icons/hicolor/128x128/apps/app.bluebubbles.BlueBubbles.png'
      - 'mkdir -p /app/share/icons/hicolor/256x256/apps'
      - 'cp -r 256x256.png /app/share/icons/hicolor/256x256/apps/app.bluebubbles.BlueBubbles.png'
      - 'mkdir -p /app/share/icons/hicolor/512x512/apps'
      - 'cp -r 512x512.png /app/share/icons/hicolor/512x512/apps/app.bluebubbles.BlueBubbles.png'
      - 'mkdir -p /app/share/applications'
      - 'cp -r app.bluebubbles.BlueBubbles.desktop /app/share/applications/'
      - 'mkdir -p /app/share/appdata'
      - 'cp -r app.bluebubbles.BlueBubbles.metainfo.xml /app/share/appdata/'
    sources:
      - type: file
        path: bluebubbles-linux-portable.tar.gz
      - type: file
        path: app.bluebubbles.BlueBubbles.metainfo.xml
      - type: file
        path: icons/64x64.png
      - type: file
        path: icons/128x128.png
      - type: file
        path: icons/256x256.png
      - type: file
        path: icons/512x512.png
      - type: file
        path: app.bluebubbles.BlueBubbles.desktop
      - type: file
        path: app.bluebubbles.BlueBubbles.metainfo.xml
      - type: archive
        only-arches:
          - x86_64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/x86_64/libvlc5-3.0.16-bp153.2.3.1.x86_64.rpm
        archive-type: rpm
        sha256: a684e1e2aa6821c568d1389480c752cc76b18cac8450fc6b2e0d8a8c3f170407
        dest: libvlc.so.5
      - type: archive
        only-arches:
          - x86_64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/x86_64/libappindicator3-1-12.10.1+bzr20170215-1.12.x86_64.rpm
        archive-type: rpm
        sha256: f24744b77186c2bff1f5c134c972948022447d30590bba7af14f46cf72264eaa
        dest: libappindicator3.so.1
      - type: archive
        only-arches:
          - x86_64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/x86_64/libindicator3-7-16.10.0+bzr20171205-1.12.x86_64.rpm
        archive-type: rpm
        sha256: db9e3ef784ede01d979261987d354d88c26a60d16f585e489c1ed8646ec8a450
        dest: libindicator3.so.7
      - type: archive
        only-arches:
          - x86_64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/x86_64/libdbusmenu-glib4-16.04.0-1.12.x86_64.rpm
        archive-type: rpm
        sha256: 891ecf92fdeec2ac98b31767276fec0d4e5c78e527065d3b6ac0bb2a9b79c581
        dest: libdbusmenu-glib.so.4
      - type: archive
        only-arches:
          - x86_64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/x86_64/libvlccore9-3.0.16-bp153.2.3.1.x86_64.rpm
        archive-type: rpm
        sha256: 6d1eed40da72b7c03e0ad32c9d73cb99931d70c0aa50bd46f210285d5a11c8c0
        dest: libvlccore.so.9
      - type: archive
        only-arches:
          - x86_64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/x86_64/libdbusmenu-gtk3-4-16.04.0-1.13.x86_64.rpm
        archive-type: rpm
        sha256: c4922e10e6a4bd7ddf4d0104d770e8eb87b768ba675c19acf1eabfdd3d3d00a2
        dest: libdbusmenu-gtk3.so.4
      - type: archive
        only-arches:
          - x86_64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/x86_64/libidn11-1.34-3.2.2.x86_64.rpm
        archive-type: rpm
        sha256: dfe93f3850f93c3846e5088716eaa4384d28753faae97e5dd41d8cea490ce797
        dest: libidn.so.11
      - type: archive
        only-arches:
          - x86_64
        url: https://github.com/objectbox/objectbox-c/releases/download/v0.16.0/objectbox-linux-x64.tar.gz
        archive-type: tar-gzip
        sha256: b597c10607bbba71b238c935581ee7bde5ea07211d899bd4581685e495da01f8
        dest: libobjectbox.so
      - type: archive
        only-arches:
          - aarch64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/aarch64/libvlc5-3.0.16-bp153.2.3.1.aarch64.rpm
        archive-type: rpm
        sha256: d5663e5038e933098a3aba1e7ea94aae38890493fd68596dbad80af76d16e5b8
        dest: libvlc.so.5
      - type: archive
        only-arches:
          - aarch64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/aarch64/libappindicator3-1-12.10.1+bzr20170215-1.12.aarch64.rpm
        archive-type: rpm
        sha256: 95623666bbc709f4d8c27f90ecaab186641b4ccca16e2a8b0e640af11f65e7a7
        dest: libappindicator3.so.1
      - type: archive
        only-arches:
          - aarch64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/aarch64/libindicator3-7-16.10.0+bzr20171205-1.12.aarch64.rpm
        archive-type: rpm
        sha256: ab833233ee5b221a9c0c27f00870773f629e038341c68816054f370ae847450d
        dest: libindicator3.so.7
      - type: archive
        only-arches:
          - aarch64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/aarch64/libdbusmenu-glib4-16.04.0-1.12.aarch64.rpm
        archive-type: rpm
        sha256: 5dd070c7cdf8b11a6c67c6aeae62e090d0d2fcba71397168ebc0f437a44947bd
        dest: libdbusmenu-glib.so.4
      - type: archive
        only-arches:
          - aarch64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/aarch64/libvlccore9-3.0.16-bp153.2.3.1.aarch64.rpm
        archive-type: rpm
        sha256: 06cdcb8d8f6e97f953d28b3c212c3b8158992de738efe41e9d37c62677fd8311
        dest: libvlccore.so.9
      - type: archive
        only-arches:
          - aarch64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/aarch64/libdbusmenu-gtk3-4-16.04.0-1.13.aarch64.rpm
        archive-type: rpm
        sha256: dc3371f5de0552d77c3539b8e4761f790dd170d55e9de259673da56e3bfc18b8
        dest: libdbusmenu-gtk3.so.4
      - type: archive
        only-arches:
          - aarch64
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/aarch64/libidn11-1.34-3.2.2.aarch64.rpm
        archive-type: rpm
        sha256: ffda308fe62af33a0e64998ad2e4617e3e11ab627803e1fb852d61519cfe90f0
        dest: libidn.so.11
      - type: archive
        only-arches:
          - aarch64
        url: https://github.com/objectbox/objectbox-c/releases/download/v0.16.0/objectbox-linux-aarch64.tar.gz
        archive-type: tar-gzip
        sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
        dest: libobjectbox.so
      - type: archive
        url: https://ftp.lysator.liu.se/pub/opensuse/distribution/leap/15.3/repo/oss/x86_64/zenity-3.32.0-2.32.x86_64.rpm
        archive-type: rpm
        sha256: 362df16f6680ccfb6268c87fa1cf6015873257ff7f9cb0170a8705915c14184d
        dest: zenity
